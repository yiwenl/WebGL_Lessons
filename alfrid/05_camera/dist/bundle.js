/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={427:t=>{"use strict";t.exports=function(){try{return!!new Blob}catch(t){return!1}}()},42:(t,e,r)=>{"use strict";var i=r(187).EventEmitter;function n(){i.call(this),this.setMaxListeners(20)}n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.off=function(t,e){return e?this.removeListener(t,e):t?this.removeAllListeners(t):this.removeAllListeners()},t.exports=n},622:(t,e,r)=>{"use strict";var i=r(42),n=r(388),s=0;t.exports=function t(e){var r,o={},a=[],_=[],E=0,u=0,h={},T=function(i){return Array.isArray(i)?(i.forEach(T),r):((s=i.assets&&Array.isArray(i.assets)?t(l(i,e)):n(l(i,e))).once("destroy",d),_.push(s),h[s.id]=s,r);var s},c=function(t){return arguments.length?o[t]?o[t]:h[t]:a},l=function(t,e){return"string"==typeof t&&(t={url:t}),void 0===t.isTouchLocked&&(t.isTouchLocked=e.isTouchLocked),void 0===t.blob&&(t.blob=e.blob),void 0===t.basePath&&(t.basePath=e.basePath),t.id=t.id||t.url||String(++s),t.type=t.type||(r=t.url)&&r.split("?")[0].split(".").pop().toLowerCase(),t.crossOrigin=t.crossOrigin||e.crossOrigin,t.webAudioContext=t.webAudioContext||e.webAudioContext,t.log=e.log,t;var r},R=function(t){var e=E+t;r.emit("progress",e/u)},A=function(t,e,i){Array.isArray(t)&&(t={id:e,file:t,type:i}),E++,r.emit("progress",E/u),o[t.id]=t.file,a.push(t),r.emit("childcomplete",t),L()},f=function(t){u--,r.listeners("error").length?r.emit("error",t):console.error(t),L()},d=function(t){h[t]=null,delete h[t],o[t]=null,delete o[t],a.some((function(e,r){if(e.id===t)return a.splice(r,1),!0}))},L=function(){E>=u&&r.emit("complete",a,o,e.id,"group")};return r=Object.create(i.prototype,{_events:{value:{}},id:{get:function(){return e.id}},add:{value:T},start:{value:function(){return u=_.length,_.forEach((function(t){t.on("progress",R).once("complete",A).once("error",f).start()})),_=[],r}},get:{value:c},find:{value:function(t){if(c(t))return c(t);var e=null;return Object.keys(h).some((function(r){return!!(e=h[r].find&&h[r].find(t))})),e}},getLoader:{value:function(t){return h[t]}},loaded:{get:function(){return E>=u}},file:{get:function(){return a}},destroy:{value:function(){for(;_.length;)_.pop().destroy();return r.off("error"),r.off("progress"),r.off("complete"),a=[],o={},e.webAudioContext=null,u=0,E=0,Object.keys(h).forEach((function(t){h[t].destroy()})),h={},r.emit("destroy",r.id),r}}}),e=l(e||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(e.assets)&&T(e.assets),r}},370:(t,e,r)=>{"use strict";var i=r(622);i.stats=r(795),t.exports=i},388:(t,e,r)=>{"use strict";var i=r(42),n=r(427),s=r(795);t.exports=function(t){var e,r,o,a,_,E,u=t.id,h=t.basePath||"",T=t.url,c=t.type,l=t.crossOrigin,R=t.isTouchLocked,A=t.blob&&n,f=t.webAudioContext,d=t.log,L=function(t){t&&(E={id:u,file:t,type:c},e.emit("progress",1),e.emit("complete",E,u,c),F())},p=function(t,e){r=e||N,(o=new XMLHttpRequest).open("GET",h+T,!0),o.responseType=t,o.addEventListener("progress",m),o.addEventListener("load",r),o.addEventListener("error",O),o.send()},m=function(t){t.lengthComputable&&e.emit("progress",t.loaded/t.total)},N=function(){I()&&L(o.response)},I=function(){return o&&o.status<400?(s.update(o,a,T,d),!0):(O(o&&o.statusText),!1)},S=function(){o=new Image,l&&(o.crossOrigin="anonymous"),o.addEventListener("error",O,!1),o.addEventListener("load",v,!1),o.src=h+T},v=function(t){window.clearTimeout(_),t||!o.error&&o.readyState?L(o):O()},g=function(){p("blob",(function(){I()&&((o=new Image).addEventListener("error",O,!1),o.addEventListener("load",C,!1),o.src=window.URL.createObjectURL(o.response))}))},C=function(){window.URL.revokeObjectURL(o.src),L(o)},M=function(){p("arraybuffer",(function(){I()&&f.decodeAudioData(o.response,(function(t){o=null,L(t)}),(function(t){O(t)}))}))},U=function(t){o=document.createElement(t),R||(window.clearTimeout(_),_=window.setTimeout(v,2e3),o.addEventListener("canplaythrough",v,!1)),o.addEventListener("error",O,!1),o.preload="auto",o.src=h+T,o.load(),R&&L(o)},O=function(t){window.clearTimeout(_);var r=t;o&&o.tagName&&o.error?r="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][o.error.code]+" "+o.src:o&&o.statusText?r=o.statusText:t&&t.message?r=t.message:t&&t.type&&(r=t.type),e.emit("error",'Error loading "'+h+T+'" '+r),P()},F=function(){e.off("error"),e.off("progress"),e.off("complete"),o&&(o.removeEventListener("progress",m),o.removeEventListener("load",r),o.removeEventListener("error",O),o.removeEventListener("load",v),o.removeEventListener("canplaythrough",v),o.removeEventListener("load",C))},P=function(){F(),o&&o.abort&&o.readyState<4&&o.abort(),o=null,f=null,E=null,window.clearTimeout(_),e.emit("destroy",u)};return e=Object.create(i.prototype,{_events:{value:{}},id:{value:t.id},start:{value:function(){switch(a=Date.now(),c){case"json":p("json",(function(){if(I()){var t=o.response;"string"==typeof t&&(t=JSON.parse(t)),L(t)}}));break;case"jpg":case"png":case"gif":case"webp":case"svg":A?g():S();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":f?M():U("audio");break;case"ogv":case"mp4":case"webm":case"hls":A?p("blob"):U("video");break;case"bin":case"binary":p("arraybuffer");break;case"txt":case"text":p("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+h+T+" ("+c+")"}}},loaded:{get:function(){return!!E}},file:{get:function(){return E}},destroy:{value:P}})}},795:t=>{"use strict";t.exports={mbs:0,secs:0,update:function(t,e,r,i){var n,s=t.getAllResponseHeaders();if(s){var o=s.match(/content-length: (\d+)/i);o&&o.length&&(n=o[1])}if(n){var a=(n=parseInt(n,10))/1024/1024,_=(Date.now()-e)/1e3;this.secs+=_,this.mbs+=a,i&&this.log(r,a,_)}else i&&console.warn.call(console,"Can't get Content-Length:",r)},log:function(t,e,r){if(t){var i="File loaded: "+t.substr(t.lastIndexOf("/")+1)+" size:"+e.toFixed(2)+"mb time:"+r.toFixed(2)+"s speed:"+(e/r).toFixed(2)+"mbps";console.log.call(console,i)}var n="Total loaded: "+this.mbs.toFixed(2)+"mb time:"+this.secs.toFixed(2)+"s speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,n)},getMbps:function(){return this.mbs/this.secs}}},187:t=>{"use strict";var e,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};e=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(r,i){function n(r){t.removeListener(e,s),i(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",n),r([].slice.call(arguments))}R(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&R(t,"error",e,{once:!0})}(t,n)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function _(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function E(t,e,r,i){var n,s,o,E;if(a(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),void 0===o)o=s[e]=r,++t._eventsCount;else if("function"==typeof o?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=_(t))>0&&o.length>n&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,E=u,console&&console.warn&&console.warn(E)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=u.bind(i);return n.listener=r,i.wrapFn=n,n}function T(t,e,r){var i=t._events;if(void 0===i)return[];var n=i[e];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):l(n,n.length)}function c(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function l(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function R(t,e,r,i){if("function"==typeof t.on)i.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(s){i.once&&t.removeEventListener(e,n),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return _(this)},s.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var _=s[t];if(void 0===_)return!1;if("function"==typeof _)i(_,this,e);else{var E=_.length,u=l(_,E);for(r=0;r<E;++r)i(u[r],this,e)}return!0},s.prototype.addListener=function(t,e){return E(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return E(this,t,e,!0)},s.prototype.once=function(t,e){return a(e),this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,h(this,t,e)),this},s.prototype.removeListener=function(t,e){var r,i,n,s,o;if(a(e),void 0===(i=this._events))return this;if(void 0===(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,n),1===r.length&&(i[t]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",t,o||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},s.prototype.listeners=function(t){return T(this,t,!0)},s.prototype.rawListeners=function(t){return T(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},s.prototype.listenerCount=c,s.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},418:t=>{"use strict";var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,s){for(var o,a,_=n(t),E=1;E<arguments.length;E++){for(var u in o=Object(arguments[E]))r.call(o,u)&&(_[u]=o[u]);if(e){a=e(o);for(var h=0;h<a.length;h++)i.call(o,a[h])&&(_[a[h]]=o[a[h]])}}return _}},643:()=>{Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,(function(r,i){return Array.isArray(i)?r.push.apply(r,t.call(i,e-1)):r.push(i),r}),[]):Array.prototype.slice.call(this)},writable:!0})}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=r(187),e=r.n(t),i=r(418),n=r.n(i),s=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array;function a(t,e){return Math.abs(t-e)<=s*Math.max(1,Math.abs(t),Math.abs(e))}function _(t,e){const r=t.getExtension(e);if(!r)return!1;const i=e.split("_")[0],n=new RegExp(`${i}$`);for(const e in r)if("function"==typeof r[e]){const i=e.replace(n,"");e.substring&&(t[i]=r[e].bind(r))}return!0}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const E=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_color_buffer_half_float","OES_vertex_array_object","WEBGL_depth_texture","ANGLE_instanced_arrays","WEBGL_color_buffer_float","WEBGL_draw_buffers","EXT_color_buffer_float"],u=(()=>{let t=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t=!0),t})(),h=(t,e)=>{if("number"==typeof t)return a(t,e);if(t.length!==e.length)return!1;let r=!0;return t.forEach(((t,i)=>{r=a(t,e[i])&&r})),r},T={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HALF_FLOAT:36193,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321},c={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36193:"HALF_FLOAT",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"},l={alpha:!1,depth:!0,premultipliedAlpha:!1};function R(){var t=new o(16);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function A(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function f(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],_=e[6],E=e[7],u=e[8],h=e[9],T=e[10],c=e[11],l=e[12],R=e[13],A=e[14],f=e[15],d=r*a-i*o,L=r*_-n*o,p=r*E-s*o,m=i*_-n*a,N=i*E-s*a,I=n*E-s*_,S=u*R-h*l,v=u*A-T*l,g=u*f-c*l,C=h*A-T*R,M=h*f-c*R,U=T*f-c*A,O=d*U-L*M+p*C+m*g-N*v+I*S;return O?(O=1/O,t[0]=(a*U-_*M+E*C)*O,t[1]=(n*M-i*U-s*C)*O,t[2]=(R*I-A*N+f*m)*O,t[3]=(T*N-h*I-c*m)*O,t[4]=(_*g-o*U-E*v)*O,t[5]=(r*U-n*g+s*v)*O,t[6]=(A*p-l*I-f*L)*O,t[7]=(u*I-T*p+c*L)*O,t[8]=(o*M-a*g+E*S)*O,t[9]=(i*g-r*M-s*S)*O,t[10]=(l*N-R*p+f*d)*O,t[11]=(h*p-u*N-c*d)*O,t[12]=(a*v-o*C-_*S)*O,t[13]=(r*C-i*v+n*S)*O,t[14]=(R*L-l*m-A*d)*O,t[15]=(u*m-h*L+T*d)*O,t):null}function d(t,e,r){var i=e[0],n=e[1],s=e[2],o=e[3],a=e[4],_=e[5],E=e[6],u=e[7],h=e[8],T=e[9],c=e[10],l=e[11],R=e[12],A=e[13],f=e[14],d=e[15],L=r[0],p=r[1],m=r[2],N=r[3];return t[0]=L*i+p*a+m*h+N*R,t[1]=L*n+p*_+m*T+N*A,t[2]=L*s+p*E+m*c+N*f,t[3]=L*o+p*u+m*l+N*d,L=r[4],p=r[5],m=r[6],N=r[7],t[4]=L*i+p*a+m*h+N*R,t[5]=L*n+p*_+m*T+N*A,t[6]=L*s+p*E+m*c+N*f,t[7]=L*o+p*u+m*l+N*d,L=r[8],p=r[9],m=r[10],N=r[11],t[8]=L*i+p*a+m*h+N*R,t[9]=L*n+p*_+m*T+N*A,t[10]=L*s+p*E+m*c+N*f,t[11]=L*o+p*u+m*l+N*d,L=r[12],p=r[13],m=r[14],N=r[15],t[12]=L*i+p*a+m*h+N*R,t[13]=L*n+p*_+m*T+N*A,t[14]=L*s+p*E+m*c+N*f,t[15]=L*o+p*u+m*l+N*d,t}function L(){var t=new o(9);return o!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function p(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function m(t,e){if(t===e){var r=e[1],i=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=i,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function N(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],_=e[6],E=e[7],u=e[8],h=u*o-a*E,T=-u*s+a*_,c=E*s-o*_,l=r*h+i*T+n*c;return l?(l=1/l,t[0]=h*l,t[1]=(-u*i+n*E)*l,t[2]=(a*i-n*o)*l,t[3]=T*l,t[4]=(u*r-n*_)*l,t[5]=(-a*r+n*s)*l,t[6]=c*l,t[7]=(-E*r+i*_)*l,t[8]=(o*r-i*s)*l,t):null}let I=0;function S(){let t,e,r=[0,0,0,0],i=0,s=0,o=0,a=(()=>{const t=document.createElement("canvas");return!(!t.getContext("experimental-webgl2")&&!t.getContext("webgl2"))})(),S=u;const g=R(),C=R(),M=R(),U=L(),O=R(),F=L();this.id="WebGLContext"+I++,this.canvas,this.gl,this.CONTEXT_LOST="contextLost",this.CONTEXT_RESTORED="contextRestored",this.shaderCount=0,this.bufferCount=0,this.textureCount=0,this.frameBufferCount=0,this.maxAnisotropy=0,this.multiRenderTargetSupport=!1,this.maxMultiRenderTargets=0,this.init=function(t,e={}){const r=n()({},l,e);if(void 0!==t){if(t instanceof HTMLCanvasElement){this.canvas=t;let i=a?"webgl2":"webgl";e.webgl1&&(i="webgl",a=!1),this.gl=t.getContext(i,r)}else window.WebGL2RenderingContext&&t instanceof WebGL2RenderingContext?(a=!0,this.gl=t,this.canvas=t.canvas):t instanceof WebGLRenderingContext?(a=!1,this.gl=t,this.canvas=t.canvas):console.error("The source has to be one of the following : Canvas, WebGLRenderingContext or WebGL2RenderingContext");this.canvas.addEventListener("webglcontextlost",B),this.canvas.addEventListener("webglcontextrestored",D),this.extensions=(t=>{const{gl:e}=t,r=window.WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,i={};E.forEach((t=>{i[t]=e.getExtension(t)})),r||(i.OES_vertex_array_object||console.error("OES_vertex_array_object extension is not supported"),_(e,"OES_vertex_array_object"),_(e,"ANGLE_instanced_arrays"),_(e,"WEBGL_draw_buffers"));const n=i.EXT_texture_filter_anisotropic;if(n&&(t.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),t.multiRenderTargetSupport=!!t.gl.drawBuffers,t.multiRenderTargetSupport){const r=t.gl.MAX_DRAW_BUFFERS||i.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL;t.maxMultiRenderTargets=e.getParameter(r)}return i})(this),(t=>{for(const e in T)t[e]?console.log("already exist : ",e):t[e]=T[e];if(t.webgl2){const e=/^[^a-z]*$/;for(const r in t.gl)e.test(r)&&-1===r.indexOf("FLOAT")&&(t[r]=t.gl[r],T[r]=t.gl[r],c[t[r]]=r)}})(this),this.setSize(this.canvas.width,this.canvas.height),this.enable(this.BLEND),this.enableAlphaBlending(),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.cullFace(v.BACK)}else{const t=document.createElement("canvas");this.init(t,r)}},this.clear=function(t=0,e=0,r=0,i=0){const{gl:n}=this;n.clearColor(t,e,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},this.setSize=function(t,e){s=Math.floor(t),o=Math.floor(e),this.canvas.width=s,this.canvas.height=o,i=s/o,this.viewport(0,0,s,o)},this.viewport=function(t,e,i,n){h(r,[t,e,i,n])||(r=[t,e,i,n],this.gl.viewport(t,e,i,n))},this.getViewport=function(){return r},this.getAspectRatio=function(){return i},this.enable=function(t){this.gl.enable(t)},this.disable=function(t){this.gl.disable(t)},this.cullFace=function(t){this.gl.cullFace(t)},this.enableAlphaBlending=function(){const{gl:t}=this;t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},this.enableAdditiveBlending=function(){const{gl:t}=this;t.blendFunc(t.ONE,t.ONE)},this.setMatrices=function(t){e=t,this.setModelMatrix(C)},this.setModelMatrix=function(t){A(M,t),void 0!==e&&(d(g,e.viewMatrix,M),p(U,g),N(U,U),m(U,U),p(F,g),N(F,F),f(O,e.viewMatrix))},this.useShader=function(e){t=e,this.shaderProgram=e.shaderProgram,this.gl.useProgram(this.shaderProgram)},this.draw=function(e){if(e.length)return void e.forEach((t=>this.draw(t)));P(),t.updateUniforms(),e.bind(this);const{drawType:r}=e,{gl:i}=this;e.isInstanced?i.drawElementsInstanced(e.drawType,e.numItems,i.UNSIGNED_INT,0,e.numInstance):r===i.POINTS?i.drawArrays(r,0,e.vertexSize):i.drawElements(r,e.numItems,i.UNSIGNED_INT,0),e.unbind()},this.getCamera=function(){return e},this.destroy=function(t=!0){this.gl.getExtension("WEBGL_lose_context").loseContext(),t&&void 0!==this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)},this.__defineGetter__("width",(function(){return s})),this.__defineGetter__("height",(function(){return o})),this.__defineGetter__("webgl2",(function(){return a})),this.__defineGetter__("isMobile",(function(){return S})),this.__defineGetter__("aspectRatio",(function(){return i}));const P=()=>{void 0!==e&&(t.uniform("uProjectionMatrix","mat4",e.projectionMatrix),t.uniform("uViewMatrix","mat4",e.viewMatrix),t.uniform("uNormalMatrix","mat3",U),t.uniform("uModelViewMatrixInverse","mat3",F)),t.uniform("uModelMatrix","mat4",M)},B=()=>{this.emit(this.CONTEXT_LOST)},D=()=>{this.emit(this.CONTEXT_RESTORED)}}S.prototype=Object.assign(Object.create(e().prototype),{constructor:S});const v=new S,g={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",ivec2:"uniform2i",ivec3:"uniform3i",ivec4:"uniform4i",mat2:"uniformMatrix2fv",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},C=t=>"number"==typeof t?t:t.slice?t.slice(0):new Float32Array(t),M=t=>"object"==typeof t?function(t){return 9===t.length?"mat3":16===t.length?"mat4":`vec${t.length}`}(t):"float";function U(t,e){let r;this.vertexShader=t||"// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}",this.fragmentShader=e||"precision highp float;\n#define GLSLIFY 1\n// varying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_FragColor = vec4(1.0);\n}",this.shaderProgram;let i={};this.bind=function(t){if(void 0===t||void 0===r||t===r){if(r=t||v,!this.shaderProgram){const t=n(this.vertexShader,!0),e=n(this.fragmentShader,!1);s(t,e)}r.useShader(this)}else console.error("this shader has been bind to a different WebGL Rendering Context",r.id)},this.uniform=function(t,e,r){let n,s;void 0===r?(s=M(e),n=e):(s=e,n=r);const o=g[s];if(i[t]){const e=i[t];h(e.value,n)||(e.value=C(n),e.changed=!0)}else i[t]={type:s,uniformType:o,value:C(n),changed:!0};return this},this.updateUniforms=function(){if(!r)return void console.warn("No WebGL Context has been set yet, please call shader.bind() first");const{gl:t}=r;for(let e in i){const r=i[e];if(r.changed){const i=e;r.uniformLoc||(r.uniformLoc=t.getUniformLocation(this.shaderProgram,i));const{uniformLoc:n,uniformType:s,value:o}=r;null!==n&&(-1===s.indexOf("Matrix")?t[s](n,o):t[s](n,!1,o)),r.changed=!1}}},this.destroy=function(){const{gl:t}=r;t.deleteProgram(this.shaderProgram),r.shaderCount--};const n=(t,e)=>{const{gl:i}=r,n=e?r.VERTEX_SHADER:r.FRAGMENT_SHADER,s=i.createShader(n);return i.shaderSource(s,t),i.compileShader(s),i.getShaderParameter(s,i.COMPILE_STATUS)?s:(console.warn("Error in Shader : ",i.getShaderInfoLog(s)),console.log((t=>{const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=`${t+1}: ${e[t]}`;return e.join("\n")})(t)),null)},s=(t,e)=>{const{gl:i}=r;this.shaderProgram=i.createProgram(),i.attachShader(this.shaderProgram,t),i.attachShader(this.shaderProgram,e),i.deleteShader(t),i.deleteShader(e),i.linkProgram(this.shaderProgram),r.shaderCount++}}function O(t=T.TRIANGLES){this.drawType=t,this.numItems=0;let e,r,i,n,s,o=[],a=[],_=[],E=!0,u=!1,h=0;this.bufferData=function(t,e,r,i=T.STATIC_DRAW,n=!1){let s,o=[];if("number"==typeof t[0]){if(s=t,void 0===r)return console.error("Missing element size for flatten data :",e),this;for(let t=0;t<s.length;t+=r){const e=[];for(let i=0;i<r;i++)e.push(s[t+i]);o.push(e)}}else o=t,s=(t=>{if(t[0]instanceof Float32Array){const e=t.reduce(((t,e)=>{for(let r=0;r<e.length;r++)t.push(e[r]);return t}),[]);return e}return t.flat()})(t);const a=void 0===r?t[0].length:r;return c(s,t,e,a,i,n)},this.bufferInstance=function(t,e){const r=t[0].length;return h=t.length,this.bufferData(t,e,r,T.STATIC_DRAW,!0)},this.bufferVertex=function(t,e=T.STATIC_DRAW){return this.bufferData(t,"aVertexPosition",3,e)},this.bufferTexCoord=function(t,e=T.STATIC_DRAW){return this.bufferData(t,"aTextureCoord",2,e)},this.bufferNormal=function(t,e=T.STATIC_DRAW){return this.bufferData(t,"aNormal",3,e)},this.bufferIndex=function(t,e=T.STATIC_DRAW){return r=e,i=new Uint32Array(t),this.numItems=i.length,E=!0,this},this.bind=function(t){if(void 0!==t&&void 0!==s&&t!==s)return void console.error("this mesh has been bind to a different WebGL Rendering Context");s=t||GL;const{gl:r}=s;l(),r.bindVertexArray(e),this.vertexSize=this.getSource("aVertexPosition").length},this.unbind=function(){},this.getAttribute=function(t){return o.find((e=>e.name===t))},this.getAttributes=function(){return o},this.getSource=function(t){const e=this.getAttribute(t);return e?e.source:[]},this.generateFaces=function(){let t,e,r,n,s,o;_=[];const{vertices:a}=this;for(let E=0;E<i.length;E+=3){t=i[E],e=i[E+1],r=i[E+2],n=a[t],s=a[e],o=a[r];const u={indices:[t,e,r],vertices:[n,s,o]};_.push(u)}},this.destroy=function(){const{gl:t}=s;o.forEach((e=>{t.deleteBuffer(e.buffer),e.source=[],e.dataArray=[],s.bufferCount--})),n&&(t.deleteBuffer(n),s.bufferCount--),t.deleteVertexArray(e),o=[],i=[],a=[]},this.__defineGetter__("vertices",(function(){return this.getSource("aVertexPosition")})),this.__defineGetter__("coords",(function(){return this.getSource("aTextureCoord")})),this.__defineGetter__("normal",(function(){return this.getSource("aNormal")})),this.__defineGetter__("indices",(function(){return i})),this.__defineGetter__("faces",(function(){return _})),this.__defineGetter__("isInstanced",(function(){return u})),this.__defineGetter__("numInstance",(function(){return h}));const c=(t,e,r,i,n=T.STATIC_DRAW,s=!1)=>{const _=n;u=s||u;const E=new Float32Array(t),h=this.getAttribute(r);return h?(h.itemSize=i,h.dataArray=E,h.source=e):o.push({name:r,source:e,itemSize:i,usage:_,dataArray:E,isInstanced:s}),a.push(r),this},l=()=>{const{shaderProgram:t,gl:r}=s;0!=a.length&&(e||(e=r.createVertexArray()),r.bindVertexArray(e),o.forEach((e=>{if(-1!==a.indexOf(e.name)){const i=function(t,e){let r;const{gl:i}=e;return void 0!==t.buffer?r=t.buffer:(r=i.createBuffer(),t.buffer=r,e.bufferCount++),r}(e,s);r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,e.dataArray,e.usage);const n=((t,e,r)=>(void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[r]&&(e.cacheAttribLoc[r]=t.getAttribLocation(e,r)),e.cacheAttribLoc[r]))(r,t,e.name);n>=0&&(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,e.itemSize,r.FLOAT,!1,0,0)),e.attrPosition=n,e.isInstanced&&r.vertexAttribDivisor(n,1)}})),R(),r.bindVertexArray(null),E=!1,a=[])},R=()=>{const{gl:t}=s;E&&(n||(n=t.createBuffer(),s.bufferCount++),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,r))}}const F=t=>0!==t&&!(t&t-1);class P{constructor(t){this._value=t}set(t,e=1){this._value=this._value,this._value=0===e?this._value&0<<t:this._value|1<<t}get(t){let e=this._value&1<<t;return e>>=t,1===e}reset(t){this._value=t}get value(){return this._value}}const B="This texture has been bind to a different WebGL Rendering Context",D=(t,e="")=>{console.error(t,e)};class x{constructor(t,e={},r=0,i=0){this._source=t,this._isHtmlElement=(t=>t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)(this._source),(this._isHtmlElement||!t||((t,e)=>{let r=!0;return"Array"===t.constructor.name&&(console.error("Please convert texture source to Unit8Array or Float32Array"),r=!1),void 0===e.type&&"Uint8Array"!==t.constructor.name&&console.error("Using none Unit8Array, pleaes specify type in the texture parameters"),r})(t,e))&&(this._getDimension(t,r,i),this._params=function(t,e,r){if(!t.minFilter){let i=T.LINEAR;e&&e&&F(e)&&F(r)&&(i=T.NEAREST_MIPMAP_LINEAR),t.minFilter=i}return t.mipmap=void 0===t.mipmap||t.mipmap,t.magFilter=t.magFilter||T.LINEAR,t.wrapS=t.wrapS||T.CLAMP_TO_EDGE,t.wrapT=t.wrapT||T.CLAMP_TO_EDGE,t.internalFormat=t.internalFormat||T.RGBA,t.format=t.format||T.RGBA,t.premultiplyAlpha=void 0!==t.premultiplyAlpha&&t.premultiplyAlpha,t.level=t.level||0,t.type=t.type||T.UNSIGNED_BYTE,t}(e,this._width,this._height),this._checkMipmap(),this._parametersState=new P(0))}bind(t,e){if(void 0!==e&&void 0!==this.GL&&e!==this.GL)return void D(B,this.GL.id);this.GL=e||v;const{gl:r}=this.GL;this.createTexture(this.GL),r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,this._texture),this._checkParameters()}createTexture(t){void 0===t||void 0===this.GL||t===this.GL?(this.GL=t||v,this._texture||(((t,e)=>{t.webgl2&&(e.type===T.HALF_FLOAT?(e.type=t.gl.HALF_FLOAT,e.internalFormat=T.RGBA16F):e.type===T.FLOAT&&(e.internalFormat=T.RGBA32F))})(this.GL,this._params),this._uploadTexture())):D(B,this.GL.id)}updateTexture(t){this._source=t,this._uploadTexture()}generateMipmap(){if(!this._generateMipmap)return;const{gl:t}=this.GL;t.bindTexture(t.TEXTURE_2D,this._texture),t.generateMipmap(t.TEXTURE_2D)}destroy(){const{gl:t}=this.GL;t.deleteTexture(this._texture),this.GL.textureCount--}showProperties(){console.log("Dimension :",this._width,this._height);for(const t in this._params)console.log(t,c[this._params[t]]||this._params[t])}_uploadTexture(){const{gl:t}=this.GL;this._texture||(this._texture=t.createTexture(),this.GL.textureCount++),t.bindTexture(t.TEXTURE_2D,this._texture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),this._isHtmlElement&&!this.GL.webgl2?t.texImage2D(t.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._params.type,this._source):t.texImage2D(t.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._params.type,this._source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this._params.magFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this._params.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._params.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._params.wrapT),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._generateMipmap&&t.generateMipmap(t.TEXTURE_2D)}_checkParameters(){const{gl:t}=this.GL;this._parametersState.value>0&&(this._parametersState.get(0)?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this._params.minFilter):this._parametersState.get(1)?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this._params.magFilter):this._parametersState.get(2)?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._params.wrapS):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._params.wrapT)),this._parametersState.reset(0)}_getDimension(t,e,r){t?(this._width=t.width||t.videoWidth,this._height=t.height||t.videoWidth,this._width=this._width||e,this._height=this._height||r,this._width&&this._height||(this._width=this._height=Math.sqrt(t.length/4))):(this._width=e,this._height=r)}_checkMipmap(){this._generateMipmap=this._params.mipmap,F(this._width)&&F(this._height)||(this._generateMipmap=!1),-1===c[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}get texture(){return this._texture}set minFilter(t){this._params.minFilter=t,this._parametersState.set(0,1)}get minFilter(){return this._params.minFilter}set magFilter(t){this._params.magFilter=t,this._parametersState.set(1,1)}get magFilter(){return this._params.magFilter}set wrapS(t){this._params.wrapS=t,this._parametersState.set(2,1)}get wrapS(){return this._params.wrapS}set wrapT(t){this._params.wrapT=t,this._parametersState.set(3,1)}get wrapT(){return this._params.wrapT}get width(){return this._width}get height(){return this._height}}function b(){var t=new o(3);return o!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function w(t,e,r){var i=new o(3);return i[0]=t,i[1]=e,i[2]=r,i}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function G(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function V(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}function H(t,e){var r=e[0],i=e[1],n=e[2],s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function W(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Y(t,e,r){var i=e[0],n=e[1],s=e[2],o=r[0],a=r[1],_=r[2];return t[0]=n*_-s*a,t[1]=s*o-i*_,t[2]=i*a-n*o,t}var j=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t};function k(t,e){this.origin=t,this.direction=e;const r=b(),i=b(),n=b(),s=b(),a=b(),_=b(),E=b(),u=b();this.at=function(t){return y(s,this.direction),X(s,s,t),G(s,s,this.origin),s},this.lookAt=function(t){j(this.direction,t,this.origin),H(this.origin,this.origin)},this.closestPointToPoint=function(t){const e=b();j(t,this.origin);const r=W(e,this.direction);return r<0?function(t){var e=new o(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}(this.origin):(y(e,this.direction),X(e,e,r),G(e,e,this.origin),e)},this.distanceToPoint=function(t){return Math.sqrt(this.distanceSqToPoint(t))},this.distanceSqToPoint=function(t){const e=b();j(e,t,this.origin);const r=W(e,this.direction);return r<0?V(this.origin,t):(y(e,this.direction),X(e,e,r),G(e,e,this.origin),V(e,t))},this.intersectsSphere=function(t,e){return this.distanceToPoint(t)<=e},this.intersectSphere=function(t,e){const r=b();j(r,t,this.origin);const i=W(r,this.direction),n=W(r,r)-i*i,s=e*e;if(n>s)return null;const o=Math.sqrt(s-n),a=i-o,_=i+o;return a<0&&_<0?null:a<0?this.at(_):this.at(a)},this.intersectTriangle=function(t,e,s,o=!0){y(r,t),y(i,e),y(n,s),j(a,i,r),j(_,n,r),Y(E,a,_);let h,T=W(this.direction,E);if(T>0){if(o)return null;h=1}else{if(!(T<0))return null;h=-1,T=-T}j(u,this.origin,r),Y(_,u,_);const c=h*W(this.direction,_);if(c<0)return null;Y(a,a,u);const l=h*W(this.direction,a);if(l<0)return null;if(c+l>T)return null;const R=-h*W(u,E);return R<0?null:this.at(R/T)}}b();class K extends class{constructor(){this._mtxView=R(),this._mtxProj=R(),this._near=0,this._far=0,this._lookDir=b()}lookAt(t,e,r=[0,1,0]){var i,n,o,a,_,E,u,h,T,c,l,R,A,f,d,L,p,m,N,I,S,v,g;i=this._mtxView,o=e,a=r,d=(n=t)[0],L=n[1],p=n[2],m=a[0],N=a[1],I=a[2],S=o[0],v=o[1],g=o[2],Math.abs(d-S)<s&&Math.abs(L-v)<s&&Math.abs(p-g)<s?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(i):(l=d-S,R=L-v,A=p-g,_=N*(A*=f=1/Math.hypot(l,R,A))-I*(R*=f),E=I*(l*=f)-m*A,u=m*R-N*l,(f=Math.hypot(_,E,u))?(_*=f=1/f,E*=f,u*=f):(_=0,E=0,u=0),h=R*u-A*E,T=A*_-l*u,c=l*E-R*_,(f=Math.hypot(h,T,c))?(h*=f=1/f,T*=f,c*=f):(h=0,T=0,c=0),i[0]=_,i[1]=h,i[2]=l,i[3]=0,i[4]=E,i[5]=T,i[6]=R,i[7]=0,i[8]=u,i[9]=c,i[10]=A,i[11]=0,i[12]=-(_*d+E*L+u*p),i[13]=-(h*d+T*L+c*p),i[14]=-(l*d+R*L+A*p),i[15]=1)}setFromViewProjection(t,e){A(this._mtxView,t),A(this._mtxProj,e)}setViewMatrix(t){A(this._mtxView,t)}setProjectionMatrix(t){A(this._mtxProj,t)}_updateMatrices(){}get viewMatrix(){return this._mtxView}get view(){return this._mtxView}get projectionMatrix(){return this._mtxProj}get projection(){return this._mtxProj}get position(){const t=R();return f(t,this._mtxView),[t[12],t[13],t[14]]}get direction(){const t=L();return p(t,this._mtxView),m(t,t),function(t,e,r){var i=e[0],n=e[1],s=e[2];t[0]=i*r[0]+n*r[3]+s*r[6],t[1]=i*r[1]+n*r[4]+s*r[7],t[2]=i*r[2]+n*r[5]+s*r[8]}(this._lookDir,[0,0,-1],t),H(this._lookDir,this._lookDir),this._lookDir}set near(t){this._near=t,this._updateMatrices()}get near(){return this._near}set far(t){this._far=t,this._updateMatrices()}get far(){return this._far}}{constructor(t,e,r,i){super(),this._fov=0,this._ratio=0,this.setPerspective(t,e,r,i)}setPerspective(t,e,r,i){(function(t,e,r,i,n){var s,o=1/Math.tan(e/2);t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(s=1/(i-n),t[10]=(n+i)*s,t[14]=2*n*i*s):(t[10]=-1,t[14]=-2*i)})(this._mtxProj,t,e,r,i),this._near=r,this._far=i,this._fov=t,this._ratio=e}setAspectRatio(t){this._ratio=t,this._updateMatrices()}generateRay(t,e){const r=R(),i=b();return d(r,this._mtxProj,this._mtxView),f(r,r),function(t,e,r){var i=e[0],n=e[1],s=e[2],o=r[3]*i+r[7]*n+r[11]*s+r[15];o=o||1,t[0]=(r[0]*i+r[4]*n+r[8]*s+r[12])/o,t[1]=(r[1]*i+r[5]*n+r[9]*s+r[13])/o,t[2]=(r[2]*i+r[6]*n+r[10]*s+r[14])/o}(i,t,r),j(i,i,this.position),H(i,i),e?(e.origin=this.position,e.direction=i):e=new k(this.position,i),e}_updateMatrices(){this.setPerspective(this._fov,this._ratio,this._near,this._far)}}class Z{constructor(t){return this._GL=t||v,this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}setClearColor(t=0,e=0,r=0,i=0){return this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=r,this._clearColor.a=i,this}useProgram(t,e){return this._shader=t instanceof U?t:new U(t,e),this}setMesh(t){return this._mesh=t,this}createMesh(t){return this._mesh=new O(t),this}bufferVertex(t){return this._mesh||(this._mesh=new O),this._mesh.bufferVertex(t),this}bufferTexCoord(t){return this._mesh||(this._mesh=new O),this._mesh.bufferTexCoord(t),this}bufferNormal(t){return this._mesh||(this._mesh=new O),this._mesh.bufferNormal(t),this}bufferIndex(t){return this._mesh||(this._mesh=new O),this._mesh.bufferIndex(t),this}bufferInstance(t,e){return this._mesh?(this._mesh.bufferInstance(t,e),this):(console.warn("Need to create mesh first"),this)}bufferData(t,e){return this._mesh||(this._mesh=new O),this._mesh.bufferData(t,e),this}uniform(t,e,r){const i=t;let n,s;return void 0===r?(s=M(e),n=e):(s=e,n=r),this._uniforms[i]={type:s,value:n},this}uniformTexture(t,e,r){return this.bindTexture(t,e,r)}bindTexture(t,e,r){return void 0!==r?this._uniformTextures[r]={name:t,texture:e}:this._uniformTextures.push({name:t,texture:e}),this}bindFrameBuffer(t){return this._fbo=t,this}draw(){if(this._shader){if(this._mesh){if(this._fbo){const{r:t,g:e,b:r,a:i}=this._clearColor;this._fbo.bind(this._GL),this._GL.clear(t,e,r,i)}this._shader.bind(this._GL);for(const t in this._uniforms){const e=this._uniforms[t];this._shader.uniform(t,e.type,e.value)}return this._uniformTextures.forEach(((t,e)=>{void 0!==t&&(this._shader.uniform(t.name,"int",e),t.texture.bind(e,this._GL))})),this._GL.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}console.warn("No Mesh assigned for draw call")}else console.warn("No GLShader assigned for draw call")}get shader(){return this._shader}get framebuffer(){return this._fbo}}class $ extends Z{constructor(t){super(t);const e=this._GL,r=1e3,i=[[-r,0,0],[r,0,0],[0,-r,0],[0,r,0],[0,0,-r],[0,0,r]];this.createMesh(e.LINES).bufferVertex(i).bufferData([[1,0,0],[1,0,0],[0,1,0],[0,1,0],[0,0,1],[0,0,1]],"aColor").bufferIndex([0,1,2,3,4,5]).useProgram("precision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\n\nvoid main(void) {\n  gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n  vColor = aColor;\n}","precision highp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nuniform float uOpacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(vColor, uOpacity);\n}"),this.opacity=.75}draw(){this.uniform("uOpacity",this.opacity),super.draw()}}class z extends Z{constructor(t){super(t),this.setMesh((new O).bufferData([[-1,-1],[-1,4],[4,-1]],"aPosition",2).bufferIndex([2,1,0])).useProgram("// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}")}draw(t){this.bindTexture("texture",t,0),super.draw(0)}}let q=window,Q=60,J=performance.now(),tt=0,et=0,rt=J;const it=[],nt=[],st=[],ot=[];let at=[],_t=[],Et=-1,ut=0;function ht(){!function(){let t,e=0,r=1e3/Q,i=0;for(e=0;e<it.length;e++)t=it[e],null!=t&&t.func(t.args);for(;at.length>0;)t=at.pop(),t.func(t.args);let n=performance.now();for(et=(n-J)/1e3,tt=n-rt,e=0;e<nt.length;e++)t=nt[e],n-t.time>t.delay&&(t.func(t.args),nt.splice(e,1));for(n=performance.now();st.length>0;){if(t=st.shift(),i=performance.now(),!(i-n<r)){st.unshift(t);break}t.func(t.args)}for(n=performance.now();ot.length>0;)t=ot.shift(),i=performance.now(),i-n<r&&t.func(t.args);rt=n,at=at.concat(_t),_t=[]}(),Et=q.requestAnimationFrame(ht)}ht();var Tt={addEF:function(t,e){const r=++ut;return it[r]={func:t,args:e},r},removeEF:function(t){return void 0!==it[t]&&(it[t]=null),-1},delay:function(t,e,r){const i=performance.now();nt.push({func:t,args:e,delay:r,time:i})},next:function(t,e){_t.push({func:t,args:e})},defer:function(t,e){st.push({func:t,args:e})},usurp:function(t,e){ot.push({func:t,args:e})},setRequestAnimationFrameSource:function(t){Et>-1&&window.cancelAnimationFrame(Et),q=t,ht()},setFrameRate:function(t){Q=t},getElapsedTime:function(){return et},getDeltaTime:function(){return tt}};const ct=Tt;class lt{constructor(t,e=.1){this.easing=e,this._value=t,this._targetValue=t,this._efIndex=ct.addEF((()=>this._update()))}_update(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}setTo(t){this._targetValue=this._value=t}add(t){this._targetValue+=t}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){ct.removeEF(this._efIndex)}set value(t){this._targetValue=t}get value(){return this._value}get targetValue(){return this._targetValue}}const Rt=function(t,e){const r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r};class At{constructor(t,e=window,r=10){this._target=t,this._listenerTarget=e,this._mouse={},this._preMouse={},this.center=b(),this._up=w(0,1,0),this.radius=new lt(r),this.position=w(0,0,this.radius.value),this.positionOffset=b(),this._rx=new lt(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new lt(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._wheelBind=t=>this._onWheel(t),this._downBind=t=>this._onDown(t),this._moveBind=t=>this._onMove(t),this._upBind=()=>this._onUp(),this.connect(),ct.addEF((()=>this._loop()))}connect(){this.disconnect(),this._listenerTarget.addEventListener("mousewheel",this._wheelBind),this._listenerTarget.addEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.addEventListener("mousedown",this._downBind),this._listenerTarget.addEventListener("touchstart",this._downBind),this._listenerTarget.addEventListener("mousemove",this._moveBind),this._listenerTarget.addEventListener("touchmove",this._moveBind),window.addEventListener("touchend",this._upBind),window.addEventListener("mouseup",this._upBind)}disconnect(){this._listenerTarget.removeEventListener("mousewheel",this._wheelBind),this._listenerTarget.removeEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.removeEventListener("mousedown",this._downBind),this._listenerTarget.removeEventListener("touchstart",this._downBind),this._listenerTarget.removeEventListener("mousemove",this._moveBind),this._listenerTarget.removeEventListener("touchmove",this._moveBind),window.removeEventListener("touchend",this._upBind),window.removeEventListener("mouseup",this._upBind)}lock(t=!0){this._isLockZoom=t,this._isLockRotation=t,this._isMouseDown=!1}lockZoom(t=!0){this._isLockZoom=t}lockRotation(t=!0){this._isLockRotation=t}inverseControl(t=!0){this._isInvert=t}_onDown(t){this._isLockRotation||(this._isMouseDown=!0,Rt(t,this._mouse),Rt(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}_onMove(t){if(!this._isLockRotation&&(Rt(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){let t=-(this._mouse.x-this._preMouse.x);this._isInvert&&(t*=-1),this._ry.value=this._preRY-.01*t*this.sensitivity;let e=-(this._mouse.y-this._preMouse.y);this._isInvert&&(e*=-1),this._rx.value=this._preRX-.01*e*this.sensitivity}}_onUp(){this._isLockRotation||(this._isMouseDown=!1)}_onWheel(t){if(this._isLockZoom)return;const e=t.wheelDelta,r=t.detail;let i=0;i=r?e?e/r/40*r>0?1:-1:-r/3:e/120,this.radius.add(2*-i),this.radius.targetValue<0&&(this.radius.value=1e-4)}_loop(){this._updatePosition(),this._target&&this._updateCamera()}update(){this._updatePosition()}_updatePosition(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;const t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t,G(this.position,this.position,this.positionOffset)}_updateCamera(){this._target.lookAt(this.position,this.center,this._up)}get rx(){return this._rx}get ry(){return this._ry}}let ft;r(643);const dt={init:t=>{ft=t.map((({id:t,file:e,type:r})=>{const i=e;let n;switch(r){case"jpg":case"png":n=new x(e);break;case"text":n=(t=>{const e=t.split("\n"),r=[],i=[],n=[],s=[],o=[],a=[],_=[];let E,u=0;const h=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,T=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,c=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,l=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,R=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,A=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,f=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function d(t){const e=parseInt(t);return 3*(e>=0?e-1:e+s.length/3)}function L(t){const e=parseInt(t);return 3*(e>=0?e-1:e+o.length/3)}function p(t){const e=parseInt(t);return 2*(e>=0?e-1:e+a.length/2)}function m(t,e,i){r.push([s[t],s[t+1],s[t+2]]),r.push([s[e],s[e+1],s[e+2]]),r.push([s[i],s[i+1],s[i+2]]),_.push(3*u+0),_.push(3*u+1),_.push(3*u+2),u++}function N(t,e,r){i.push([a[t],a[t+1]]),i.push([a[e],a[e+1]]),i.push([a[r],a[r+1]])}function I(t,e,r){n.push([o[t],o[t+1],o[t+2]]),n.push([o[e],o[e+1],o[e+2]]),n.push([o[r],o[r+1],o[r+2]])}function S(t,e,r,i,n,s,o,a,_,E,u,h){let T,c=d(t),l=d(e),R=d(r);void 0===i?m(c,l,R):(T=d(i),m(c,l,T),m(l,R,T)),void 0!==n&&(c=p(n),l=p(s),R=p(o),void 0===i?N(c,l,R):(T=p(a),N(c,l,T),N(l,R,T))),void 0!==_&&(c=L(_),l=L(E),R=L(u),void 0===i?I(c,l,R):(T=L(h),I(c,l,T),I(l,R,T)))}for(let t=0;t<e.length;t++){let r=e[t];r=r.trim(),0!==r.length&&"#"!==r.charAt(0)&&(null!==(E=h.exec(r))?s.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])):null!==(E=T.exec(r))?o.push(parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3])):null!==(E=c.exec(r))?a.push(parseFloat(E[1]),parseFloat(E[2])):null!==(E=l.exec(r))?S(E[1],E[2],E[3],E[4]):null!==(E=R.exec(r))?S(E[2],E[5],E[8],E[11],E[3],E[6],E[9],E[12]):null!==(E=A.exec(r))?S(E[2],E[6],E[10],E[14],E[3],E[7],E[11],E[15],E[4],E[8],E[12],E[16]):null!==(E=f.exec(r))&&S(E[2],E[5],E[8],E[11],void 0,void 0,void 0,void 0,E[3],E[6],E[9],E[12]))}return(t=>{const e=t.normals.length>0,r=t.coords.length>0;let i;if(t.positions.length>65535){const n=[];let s=0;const o={};for(o.positions=t.positions.concat(),o.coords=t.coords.concat(),o.indices=t.indices.concat(),o.normals=t.normals.concat();t.indices.length>0;){const a=Math.min(65535,t.positions.length),_=t.indices.splice(0,a),E=[],u=[],h=[];let T,c=0;for(let t=0;t<_.length;t++)_[t]>c&&(c=_[t]),T=_[t],E.push(o.positions[T]),r&&u.push(o.coords[T]),e&&h.push(o.normals[T]),_[t]-=s;s=c+1,i=new O,i.bufferVertex(E),r&&i.bufferTexCoord(u),i.bufferIndex(_),e&&i.bufferNormal(h),n.push(i)}return n}return i=new O,i.bufferVertex(t.positions),r&&i.bufferTexCoord(t.coords),i.bufferIndex(t.indices),e&&i.bufferNormal(t.normals),i})({positions:r,coords:i,normals:n,indices:_})})(e)}return{id:t,source:i,type:r,file:n}})),console.table(ft)},get:t=>{const e=ft.find((e=>e.id===t));return e?e.file:null}},Lt=dt,pt=[{id:"color",url:"assets/color.jpg",type:"jpg"},{id:"tree",url:"assets/tree.obj",type:"text"}];var mt=r(370),Nt=r.n(mt);let It,St,vt,gt,Ct;String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)},window.addEventListener("keydown",(t=>{if(83===t.keyCode&&t.metaKey){t.preventDefault();const e=(()=>{const t=new Date;return`${t.getFullYear()}.${t.getMonth()+1}.${t.getDate()}-${t.getHours()}.${t.getMinutes()}.${t.getSeconds()}`})();((t,e)=>{var r=document.createElement("a"),i=(t=>{for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,s=new Uint8Array(n);n--;)s[n]=i.charCodeAt(n);return new Blob([s],{type:r})})(t.toDataURL({format:"png",multiplier:4})),n=URL.createObjectURL(i);r.download=`${e}.png`,r.href=n,r.click()})(document.querySelector("canvas"),e)}}));const Mt={canvasScale:1,numRings:((t,e)=>Math.floor(((t,e)=>void 0===t?fxrand():void 0===e?fxrand()*t:t+(e-t)*fxrand())(t,e)))(8,12)};let Ut;function Ot(){v.viewport(0,0,v.width,v.height),v.clear(0,0,0,1),v.setMatrices(It),vt.draw(),St.draw(),v.viewport(0,0,300,300),gt.draw(Lt.get("color"))}function Ft(){const{innerWidth:t,innerHeight:e,devicePixelRatio:r}=window,{canvasScale:i}=Mt;let n=Math.max(i,r);v.setSize(1024*n,1024*n);let s=innerWidth/v.width,o=innerHeight/v.height;n=Math.min(s,o);const a=v.width*n,_=v.height*n,E=(t-a)/2,u=(e-_)/2;Ut.style.cssText=`\n    width:${a}px;\n    height:${_}px;\n    left:${E}px;\n    top:${u}px;\n    position:absolute;\n  `,It.setAspectRatio(v.aspectRatio)}var Pt;new Promise(((t,e)=>{const r=document.body.querySelector(".Loading-Bar");console.log("Load Assets",pt),pt.length>0?(document.body.classList.add("isLoading"),new(Nt())({assets:pt}).on("error",(t=>{console.log("Error :",t)})).on("progress",(t=>{r&&(r.style.width=100*t+"%")})).on("complete",(e=>{r&&(r.style.width="100%"),Lt.init(e),setTimeout((()=>{document.body.classList.remove("isLoading"),t(Pt)}),500)})).start()):t(Pt)})).then((function(){Ut=document.createElement("canvas"),Ut.id="main-canvas",document.body.appendChild(Ut),v.init(Ut,{alpha:!1,webgl1:!0,preserveDrawingBuffer:!0}),It=new K,It.setPerspective(Math.PI/2,v.aspectRatio,.1,100),Ct=new At(It,Ut),Ct.rx.setTo(.3),Ct.ry.setTo(.3),vt=new $,gt=new z,St=(new Z).setMesh(Lt.get("tree")).useProgram("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec3 vNormal;\nfloat diffuse(vec3 n, vec3 l) {\n  float d = dot(normalize(n), normalize(l));\n  return max(d, 0.0);\n}\n\nfloat diffuse(vec3 n, vec3 l, float t) {\n  float d = dot(normalize(n), normalize(l));\n  return mix(1.0, max(d, 0.0), t);\n}\n\n#define LIGHT vec3(1.0, 0.8, 0.6)\n\nvoid main(void) {\n    float g = diffuse(vNormal, LIGHT, .5);\n    gl_FragColor = vec4(vec3(g), 1.0);\n}"),Ft(),ct.addEF(Ot)}),(t=>{console.error(t)})),window.addEventListener("resize",Ft)})()})();